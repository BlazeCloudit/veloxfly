<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-lang-key="DashboardTitle">VeloxFly™ - Hub Prenotazioni</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style-base.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    /* Stili Tema (Duplicati da Index per coerenza) */
    .dark-mode { background-color: #1a1a1a !important; color: #f0f0f0 !important; }
    .dark-mode .bg-light-blue { background-color: #333 !important; }
    .dark-mode .navbar-dark.bg-primary { background-color: #003366 !important; }
    .dark-mode .card, .dark-mode .form-control { background-color: #2b2b2b !important; color: #f0f0f0 !important; border-color: #444; }
    .dark-mode .text-primary { color: #ffcc00 !important; }
    .dark-mode .boarding-pass { background: linear-gradient(145deg, #2b2b2b, #1a1a1a) !important; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); }
    .dark-mode .comfort-badge { background-color: #ffcc00; color: #1a1a1a; }
    .comfort-badge { background-color: #0055a4; color: white; padding: 5px 10px; border-radius: 5px; font-weight: bold; }
    .status-pending { color: orange; font-weight: bold; }
    .status-confirmed { color: green; font-weight: bold; }
    
    /* Stili per la Card Dettaglio (Boarding Pass Mockup) */
    .boarding-pass { border: 2px dashed #0055a4; border-radius: 15px; padding: 25px; margin-top: 20px; background-color: #fff; }
    .strip { height: 10px; background: repeating-linear-gradient(45deg, #0055a4, #0055a4 10px, #ffcc00 10px, #ffcc00 20px); border-radius: 5px; }
  </style>
</head>
<body id="body-main">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">VeloxFly™</a>
      <div class="ms-auto d-flex align-items-center">
         <div class="dropdown me-3">
            <button class="btn btn-sm btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                <span id="current-lang-display">IT</span> / <i class="fas fa-sun" id="theme-icon"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
                <li><button class="dropdown-item" id="toggle-theme"><i class="fas fa-moon me-2"></i> Modalità Scura</button></li>
                <li><hr class="dropdown-divider"></li>
                <li><button class="dropdown-item lang-switch" data-lang="it">Italiano</button></li>
                <li><button class="dropdown-item lang-switch" data-lang="en">English</button></li>
            </ul>
        </div>
        <div id="user-info" style="display:none;" class="text-white me-3 d-flex align-items-center">
            <span id="username-display" class="fw-bold me-2"></span>
            <a href="profilo.html" id="profile-link" class="btn btn-sm btn-outline-light me-2" data-lang-key="Profile">Profilo</a>
            <a href="#" id="logout-button" class="btn btn-sm btn-outline-light" data-lang-key="Logout">Logout</a>
        </div>
        <a href="#" id="login-button" class="btn btn-sm btn-outline-light" data-lang-key="Login" data-bs-toggle="modal" data-bs-target="#authModal">Accedi</a>
      </div>
    </div>
  </nav>

  <main class="container mt-5">
    <h2 class="text-center mb-4 text-primary" data-lang-key="DashboardH2">Hub Prenotazioni</h2>
    
    <div id="booking-detail-view" class="d-none">
        <button id="back-to-list" class="btn btn-outline-secondary mb-3"><i class="fas fa-arrow-left me-2"></i> <span data-lang-key="BackToList">Torna alla Lista</span></button>
        <div class="alert alert-info text-center" data-lang-key="DetailMessage">Dettaglio e Logistica di Viaggio.</div>
        
        <div class="boarding-pass card shadow-lg p-4">
            <div class="strip mb-3"></div>
            <h4 class="mb-3 text-primary"><i class="fas fa-ticket-alt"></i> <span data-lang-key="BoardingPassTitle">Carta d'Imbarco Provvisoria</span></h4>
            
            <div class="row mb-3">
                <div class="col-md-6"><label class="fw-bold" data-lang-key="PassengerLabel">Passeggero:</label><input id="passenger_name_display" class="form-control form-control-plaintext" readonly></div>
                <div class="col-md-6"><label class="fw-bold" data-lang-key="ContactEmailLabel">Email di Contatto:</label><input id="contact_email_display" class="form-control form-control-plaintext" readonly></div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6"><label class="fw-bold" data-lang-key="BookingCodeLabel">Codice Prenotazione:</label><input id="booking_code_display" class="form-control form-control-plaintext text-danger fw-bold" readonly></div>
                <div class="col-md-6"><label class="fw-bold" data-lang-key="StatusLabel">Stato Attuale:</label><input id="status_display" class="form-control form-control-plaintext fw-bold" readonly></div>
            </div>
            
            <div class="flight-info-box p-3 mb-3 bg-light-blue rounded">
                <h5 class="text-primary"><i class="fas fa-plane"></i> <span data-lang-key="FlightLabel">Dati Volo</span></h5>
                <div class="row">
                    <div class="col-md-4"><label class="fw-bold" data-lang-key="DepartureLabel">Partenza:</label><input id="partenza_display" class="form-control form-control-plaintext" readonly></div>
                    <div class="col-md-4"><label class="fw-bold" data-lang-key="DestinationLabel">Destinazione:</label><input id="destinazione_display" class="form-control form-control-plaintext" readonly></div>
                    <div class="col-md-4"><label class="fw-bold" data-lang-key="DateLabel">Data:</label><input id="data_display" class="form-control form-control-plaintext" readonly></div>
                </div>
            </div>
            
            <h5 class="mt-4 mb-3 text-primary"><i class="fas fa-cogs"></i> <span data-lang-key="LogisticsTitle">Logistica Aggiuntiva</span></h5>
            
            <div class="mb-3">
              <label class="form-label fw-bold" data-lang-key="HotelLabel">Hotel scelto</label>
              <input id="hotel_scelto" class="form-control" placeholder="Es: Velox Inn">
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold" data-lang-key="RentalLabel">Noleggio richiesto</label>
              <select id="noleggio_richiesto" class="form-select">
                <option value="" data-lang-key="None">Nessuno</option>
                <option value="auto" data-lang-key="Car">Auto</option>
                <option value="scooter" data-lang-key="Scooter">Scooter</option>
                <option value="bici" data-lang-key="Bike">Bici</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label fw-bold" data-lang-key="NotesLabel">Note logistiche (opz.)</label>
              <textarea id="note_logistiche" class="form-control" rows="3" placeholder="Es: check-in ore 15:00"></textarea>
            </div>
            
            <button id="conferma-prenotazione" class="btn btn-success w-100 mt-4"><i class="fas fa-check-circle"></i> <span data-lang-key="ConfirmButton">CONFERMA PRENOTAZIONE E INVIA EMAIL</span></button>
            <p class="text-center mt-3"><span class="comfort-badge"><i class="fas fa-rocket me-2"></i> <span data-lang-key="ComfortPromise">Tec. Avanzata: Decollo/Atterraggio **Zero Fastidi**</span></span></p>
        </div>
    </div>
    
    <div id="booking-list-view">
        <div class="alert alert-warning" id="no-bookings-message" style="display:none;" data-lang-key="NoBookings">Nessuna prenotazione trovata. Inizia creando un nuovo volo dalla Home.</div>
        
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead>
                    <tr>
                        <th data-lang-key="TableCode">Codice Interno</th>
                        <th data-lang-key="TablePassenger">Passeggero</th>
                        <th data-lang-key="TableRoute">Rotta</th>
                        <th data-lang-key="TableDate">Data</th>
                        <th data-lang-key="TableStatus">Stato</th>
                        <th data-lang-key="TableActions">Azioni</th>
                    </tr>
                </thead>
                <tbody id="bookings-table-body">
                    </tbody>
            </table>
        </div>
    </div>
  </main>
  
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>